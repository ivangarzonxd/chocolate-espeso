/* ====================================================================
   SECCIÓN 7: SISTEMA DE MODALES
   ==================================================================== */

/* --- Fondo Modal (Overlay) --- */
.fondo-modal {
  position: fixed;                  /* Queda fijo en la pantalla */
  inset: 0;                         /* Cubre toda la pantalla */
  background: rgba(0, 0, 0, 0.85);  /* Negro transparente 85% */
  display: flex;                    /* Usa flexbox */
  align-items: flex-end;            /* Alinea elementos abajo */
  visibility: hidden;               /* Invisible por defecto */
  opacity: 0;                       /* Totalmente transparente */
  transition: 0.3s;                 /* Animación suave */
  z-index: 100;                     /* Encima de todo */
}

.fondo-modal#modal-transaccion {
  align-items: stretch;             /* El contenedor ocupa toda la altura */
}

.fondo-modal.activo {
  visibility: visible;              /* Se hace visible */
  opacity: 1;                       /* Se hace opaco */
}

/* --- Contenedor Modal --- */
.contenedor-modal {
  background: var(--bg-tarjeta);    /* Fondo gris oscuro */
  width: 100%;                      /* Ancho completo */
  border-radius: 25px 25px 0 0;     /* Esquinas redondeadas arriba */
  padding: 30px 20px;               /* Espacio interno */
  border-top: 1px solid #444;       /* Línea gris arriba */
}

.contenedor-modal-historial {
  max-height: 80vh;                 /* Alto máximo 80% de ventana */
  display: flex;                    /* Usa flexbox */
  flex-direction: column;           /* Elementos apilados verticalmente */
}

.contenedor-modal-transaccion-completo {
  height: 95vh;                     /* Alto 95% de pantalla para fullscreen */
  display: flex;                    /* Usa flexbox */
  flex-direction: column;           /* Elementos apilados verticalmente */
  overflow-y: auto;                 /* Permite desplazamiento */
  border-radius: 25px 25px 0 0;     /* Esquinas redondeadas arriba */
}

/* --- Modal de Socios --- */
.lista-socios {
  display: flex;                    /* Usa flexbox */
  flex-direction: column;           /* Elementos apilados */
  gap: 10px;                        /* Espacio entre elementos */
}

/* --- Modal de Historial --- */

/**
 * Encabezado del Historial
 * Muestra las columnas: Fecha | Monto | Acción
 */
.encabezado-historial {
  display: flex;                    /* Usa flexbox */
  align-items: center;              /* Centra verticalmente */
  gap: 10px;                        /* Espacio entre columnas */
  padding: 10px 12px;               /* Espacio interno */
  background: #1a1a1a;              /* Fondo muy oscuro */
  border-radius: var(--borde-radio-pequeno); /* Esquinas redondeadas */
  margin-bottom: 10px;              /* Espacio abajo */
  font-size: 0.75rem;               /* Texto muy pequeño */
  font-weight: bold;                /* Texto negrita */
  color: var(--txt-gris);           /* Texto gris */
  text-transform: uppercase;        /* Mayúsculas */
  letter-spacing: 0.5px;            /* Espaciado entre letras */
}

.columna-fecha {
  flex: 1;                          /* Ocupa espacio disponible */
}

.columna-monto {
  min-width: 70px;                  /* Ancho mínimo para montos */
  text-align: right;                /* Alinea a la derecha */
}

.columna-accion {
  min-width: 80px;                  /* Ancho mínimo para botones */
  text-align: center;               /* Centra el contenido */
}

/**
 * Lista de Historial
 * Contenedor desplazable para las transacciones
 */
.lista-historial {
  flex: 1;                          /* Ocupa todo el espacio disponible */
  overflow-y: auto;                 /* Permite desplazamiento vertical */
  margin-bottom: 20px;              /* Espacio abajo */
  min-height: 150px;                /* Alto mínimo para garantizar visibilidad */
}

/**
 * Encabezado de Fecha en Historial
 * Agrupa transacciones por fecha
 */
.encabezado-fecha {
  padding: 6px 8px;                 /* Espacio interno reducido */
  margin-top: 10px;                 /* Espacio arriba reducido */
  margin-bottom: 5px;               /* Espacio abajo reducido */
  font-size: 0.75rem;               /* Texto más pequeño */
  font-weight: bold;                /* Negrita para destacar */
  color: #aaa;                      /* Texto gris claro */
  text-transform: uppercase;        /* Mayúsculas */
  letter-spacing: 0.5px;            /* Espaciado entre letras */
  border-bottom: 1px solid #333;    /* Línea divisoria sutil */
  line-height: 1.1;                 /* Alto de línea compacto */
}

/**
 * Fila de Historial
 * Representa una transacción individual
 */
.fila-historial {
  background: #2a2a2a;              /* Fondo gris oscuro */
  border-radius: var(--borde-radio-pequeno); /* Esquinas redondeadas */
  padding: 8px 10px;                /* Espacio interno reducido */
  margin-bottom: 6px;               /* Poco espacio entre filas */
  display: flex;                    /* Usa flexbox */
  align-items: center;              /* Centra verticalmente */
  gap: 8px;                         /* Espacio entre elementos */
  border-left: 3px solid #444;      /* Línea colorida a la izquierda */
  transition: background 0.2s;      /* Cambio suave de color */
  min-height: auto;                 /* Alto mínimo natural */
}

.fila-historial.abono-especifico {
  background: #1f2f1f;              /* Fondo verde oscuro para abonos específicos */
  border-left-color: #00e676;       /* Borde verde */
  margin-left: 15px;                /* Indentación visual */
  border-radius: 4px;               /* Esquinas menos redondeadas */
  position: relative;               /* Para el indicador */
}

.fila-historial.abono-especifico::before {
  content: "↳";                     /* Flecha indicadora */
  position: absolute;                /* Posicionado */
  left: -12px;                       /* A la izquierda */
  top: 50%;                          /* Centrado verticalmente */
  transform: translateY(-50%);       /* Centrado */
  color: #00e676;                   /* Color verde */
  font-weight: bold;                /* Negrita */
}

/* Estilo especial para abonos bajo su deuda original */
.fila-historial.abono-especifico.bajo-deuda {
  margin-top: -4px;                 /* Acerca al elemento anterior */
  margin-left: 25px;                /* Indentación mayor para mostrar jerarquía */
  background: #162a16;              /* Fondo más oscuro aún */
  border-top: 1px dashed #00e676;   /* Línea punteada superior */
  border-top-left-radius: 0;        /* Esquina superior izquierda sin redondear */
  opacity: 0.95;                    /* Ligeramente más translúcido */
}

.fila-historial.abono-especifico.bajo-deuda::before {
  left: -25px;                      /* Más a la izquierda por más indentación */
}

.fila-historial.pendiente {
  background: #332200;              /* Fondo marrón para transacciones pendientes */
  border-left-color: var(--color-secundario); /* Línea naranja */
}

/* --- Detalle de Fila de Historial --- */
.detalle-fila {
  flex: 1;                          /* Ocupa espacio disponible */
  display: flex;                    /* Usa flexbox */
  flex-direction: column;           /* Elementos apilados */
  gap: 1px;                         /* Espacio mínimo entre elementos */
}

.fecha-fila {
  font-size: 0.7rem;                /* Texto más pequeño */
  color: var(--txt-gris);           /* Color gris */
  line-height: 1.2;                 /* Altura de línea compacta */
}

.descripcion-fila {
  font-size: 0.85rem;               /* Texto más pequeño */
  font-weight: 500;                 /* Semibold */
  line-height: 1.2;                 /* Altura de línea compacta */
}

.monto-fila {
  font-size: 0.9rem;                /* Texto más pequeño */
  font-weight: bold;                /* Negrita */
  min-width: 60px;                  /* Ancho mínimo reducido */
  text-align: right;                /* Alinea a la derecha */
  white-space: nowrap;              /* Evita salto de línea */
}

/* Se elimina la columna de acción por fila para ahorrar altura */

/* --- Controles de Acción en Historial --- */
.icono-eliminar {
  font-size: 1.8rem;                /* Emoji grande */
  cursor: pointer;                  /* Cursor de manita */
  padding: 5px;                     /* Espacio interno */
  transition: transform 0.1s;       /* Cambio rápido de tamaño */
  user-select: none;                /* No permite seleccionar el emoji */
}

.icono-eliminar:active {
  transform: scale(1.2);            /* Se agranda al presionar */
}

.etiqueta-eliminar {
  font-size: 0.65rem;               /* Texto muy pequeño */
  color: var(--txt-gris);           /* Color gris */
  text-transform: uppercase;        /* Mayúsculas */
  letter-spacing: 0.3px;            /* Espaciado entre letras */
  margin-top: -3px;                 /* Acerca la etiqueta al emoji */
}

/* Icono de eliminar en cabecera: tamaño y estados */
.icono-eliminar.cabecera {
  font-size: 2rem;                  /* Tamaño óptimo para móvil */
  line-height: 1;                   /* Compacto */
}
.icono-eliminar.cabecera.activo {
  color: #ff5252;                   /* Rojo cuando está activo */
  text-shadow: 0 1px 6px rgba(255, 82, 82, 0.6);
}

/* Modo eliminar activo: dar pista visual en filas */
.modo-eliminar-activo .fila-historial {
  outline: 1px dashed #ff5252;      /* Indicador sutil */
}
